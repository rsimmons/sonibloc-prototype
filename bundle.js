!function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){"use strict";function n(t){return t[Math.floor(Math.random()*t.length)]}var i=t("../../sonibloc.js");e.exports=i.createBloc(function(){var t=this.addMidiOutput("midi");this.beats.on("16th",function(e){var i=31+n([0,3,5,7,10,12]);t.noteOnOff({time:e.time,pitch:i,duration:e.duration})})})},{"../../sonibloc.js":10}],2:[function(t,e){"use strict";var n=t("../../sonibloc.js");e.exports=n.createBloc(function(){var t=this.audioContext,e=t.createGain();e.gain.value=1;var n=t.createDelay();n.delayTime.value=.005;var i=t.createGain();i.gain.value=.7;var o=t.createGain();o.gain.value=.7,e.connect(n),n.connect(i),i.connect(n),e.connect(o),i.connect(o),this.addAudioInput("audio",e),this.addAudioOutput("audio",o)})},{"../../sonibloc.js":10}],3:[function(t,e){"use strict";var n=t("../../sonibloc.js");e.exports=n.createBloc(function(){var t=10,e=this.audioContext,n=e.createGain();n.gain.value=1/t;var i=e.createBiquadFilter();i.type="lowpass",i.frequency.value=2e3,i.Q.value=10,i.connect(n);var o={};this.addMidiInput("midi").on("noteOn",function(n){if(!o.hasOwnProperty(n.pitch)){for(var r=440*Math.pow(2,(n.pitch-69)/12),s=n.time||e.currentTime,a={oscs:[]},c=0;t>c;c++){var u=e.createOscillator();u.type="sawtooth",u.frequency.value=r,u.detune.value=2*c,u.connect(i),u.start(s),a.oscs.push(u)}o[n.pitch]=a}}).on("noteOff",function(t){if(o.hasOwnProperty(t.pitch)){for(var n=t.time||e.currentTime,i=o[t.pitch],r=0;r<i.oscs.length;r++)i.oscs[r].stop(n);delete o[t.pitch]}}),this.addAudioOutput("audio",n)})},{"../../sonibloc.js":10}],4:[function(t,e){function n(t){return Math.round(12*(Math.log(t/440,2)/Math.LN2)+69)}var i="0.4.3",o={},r=!1,s={},a={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",89:"G#l",90:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",59:"Eu",186:"Eu",222:"Fu",221:"F#u",220:"Gu"},c=function(t){return Math.floor((o.width-t)/t)},u=function(t){var e;user_settings=t||{},o={id:user_settings.id||"keyboard",octaves:user_settings.octaves||3,width:user_settings.width,height:user_settings.height,startNote:user_settings.startNote||"A3",whiteKeyColour:user_settings.whiteKeyColour||"#fff",blackKeyColour:user_settings.blackKeyColour||"#000",activeColour:user_settings.activeColour||"yellow",borderColour:user_settings.borderColour||"#000",keyboardLayout:user_settings.keyboardLayout||"en"},e=document.getElementById(o.id),"undefined"==typeof o.width&&(o.width=e.offsetWidth),"undefined"==typeof o.height&&(o.height=e.offsetHeight),o.startOctave=parseInt(o.startNote.charAt(1),10),L(),P.call(this,e)},l=function(t){var e,n,i=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];return n=t.charAt(3===t.length?2:1),e=i.indexOf(t.slice(0,-1)),e=3>e?e+12+12*(n-1)+1:e+12*(n-1)+1,440*Math.pow(2,(e-49)/12)},d=function(t){(null!==t||void 0===typeof t)&&(t.style.backgroundColor=o.activeColour)},h=function(t){null!==t&&(t.style.backgroundColor="white"===t.getAttribute("data-note-type")?o.whiteKeyColour:o.blackKeyColour)},f=function(t){var e,n=0,i=t.length,r=[];for(e=0;i>e;e++)if(o.startNote.charAt(0)===t[e]){n=e;break}for(e=0;i>e;e++)r[e]=e+n>i-1?t[e+n-i]:t[e+n];return r},p=function(t){t.el.style.backgroundColor=o.whiteKeyColour,t.el.style.border="1px solid "+o.borderColour,t.el.style.borderRight=0,t.el.style.height=o.height+"px",t.el.style.width=t.width+"px",t.el.style.borderRadius="0 0 5px 5px"},m=function(t){var e=c(E()),n=Math.floor(e/2);t.el.style.backgroundColor=o.blackKeyColour,t.el.style.border="1px solid "+o.borderColour,t.el.style.position="absolute",t.el.style.left=Math.floor((e+1)*(t.noteNumber+1)-n/2)+"px",t.el.style.width=n+"px",t.el.style.height=o.height/1.5+"px",t.el.style.borderRadius="0 0 3px 3px"},y=function(t){t.el.style.display="inline-block",t.el.style["-webkit-user-select"]="none","white"===t.colour?p(t):m(t)},v=function(t){var e=function(t){t.style.cursor="default",t.style.fontSize="0px",t.style.height=o.height+"px",t.style.padding=0,t.style.position="relative",t.style.listStyle="none",t.style.margin=0,t.style.width=o.width+"px",t.style["-webkit-user-select"]="none"};e(t.container),e(t.el)},w=function(t,e){r=!0,d(t),e(t.title,l(t.title))},g=function(t,e){r=!1,h(t),e(t.title,l(t.title))},b=function(t,e){r&&(d(t),e(t.title,l(t.title)))},_=function(t,e){r&&(h(t),e(t.title,l(t.title)))},k=function(t){return t.el=document.createElement("li"),t.el.id=t.id,t.el.title=t.id,t.el.setAttribute("data-note-type",t.colour),y(t),t},E=function(){return 7*o.octaves},x=function(){var t,e,n=this,i=[],r=0,s=o.startOctave,a=E();for(t=0;a>t;t++)t%this.whiteNotes.length===0&&(r=0),bizarre_note_counter=this.whiteNotes[r],"C"===bizarre_note_counter&&0!==t&&s++,e=k({colour:"white",octave:s,width:c(a),id:this.whiteNotes[r]+s,noteNumber:t}),i.push(e.el),t!==a-1&&this.notesWithSharps.forEach(function(o){o===n.whiteNotes[r]&&(e=k({colour:"black",octave:s,width:c(a)/2,id:n.whiteNotes[r]+"#"+s,noteNumber:t}),i.push(e.el))}),r++;return i},C=function(t){t.keys.forEach(function(e){t.el.appendChild(e)})},O=function(t){o.keyPressOffset="C"===t[0]?0:1},L=function(){var t={container:document.getElementById(o.id),el:document.createElement("ul"),whiteNotes:f(["C","D","E","F","G","A","B"]),notesWithSharps:f(["C","D","F","G","A"])};return t.keys=x.call(t),O(t.whiteNotes),v(t),C(t),t.container.appendChild(t.el),t},j=function(t){return a[t].replace("l",parseInt(o.startOctave,10)+o.keyPressOffset).replace("u",(parseInt(o.startOctave,10)+o.keyPressOffset+1).toString())},A=function(t,e){var n;t.keyCode in s||(s[t.keyCode]=!0,"undefined"!=typeof a[t.keyCode]&&(n=j(t.keyCode),e(n,l(n)),d(document.getElementById(n))))},M=function(t,e){var n;delete s[t.keyCode],"undefined"!=typeof a[t.keyCode]&&(n=j(t.keyCode),e(n,l(n)),h(document.getElementById(n)))},P=function(t){var e=this;window.addEventListener("keydown",function(t){A(t,e.keyDown)}),window.addEventListener("keyup",function(t){M(t,e.keyUp)}),t.addEventListener("mousedown",function(t){w(t.target,e.keyDown)}),t.addEventListener("mouseup",function(t){g(t.target,e.keyUp)}),t.addEventListener("mouseover",function(t){b(t.target,e.keyDown)}),t.addEventListener("mouseout",function(t){_(t.target,e.keyUp)}),"ontouchstart"in document.documentElement&&(t.addEventListener("touchstart",function(t){w(t.target,e.keyDown)}),t.addEventListener("touchend",function(t){g(t.target,e.keyUp)}),t.addEventListener("touchleave",function(t){_(t.target,e.keyUp)}),t.addEventListener("touchcancel",function(t){_(t.target,e.keyUp)}))},D=function(t){this.version=i,this.keyDown=function(){},this.keyUp=function(){},u.call(this,t)},I=t("../../sonibloc.js");e.exports=I.createBloc(function(){var t=this.addMidiOutput("midi");this.messages.on("keyDown",function(e){t.noteOn({pitch:e})}),this.messages.on("keyUp",function(e){t.noteOff({pitch:e})})},function(){this.container.innerHTML='<div id="qwerty-holder"></div>';var t=new D({id:"qwerty-holder",width:460,height:150,octaves:2,startNote:"C3"}),e=this;t.keyDown=function(t,i){e.processor.sendMessage("keyDown",n(i))},t.keyUp=function(t,i){e.processor.sendMessage("keyUp",n(i))}})},{"../../sonibloc.js":10}],5:[function(t,e){"use strict";e.exports={initialize:function(e,n){function i(t){return t[Math.floor(Math.random()*t.length)]}n.innerHTML='<div id="clickme" style="padding:20px;border:1px solid black;text-align:center;">Click Me</div>';var o=t("./blocs/lumberjack.js").createProcessor(e);return o.outputs.audio.node.connect(e.destination),document.getElementById("clickme").addEventListener("mousedown",function(t){t.preventDefault(),o.inputs.midi.noteOnOff({pitch:31+i([0,3,5,7,10,12]),duration:1})}),function(){o.outputs.audio.disconnect()}}}},{"./blocs/lumberjack.js":3}],6:[function(t,e){"use strict";e.exports={initialize:function(e){var n=t("./blocs/bassline.js").createProcessor(e),i=t("./blocs/lumberjack.js").createProcessor(e),o=t("./blocs/feedbackdelay.js").createProcessor(e);return n.outputs.midi.connect(i.inputs.midi),i.outputs.audio.node.connect(o.inputs.audio.node),o.outputs.audio.node.connect(e.destination),n.start(120),function(){o.outputs.audio.disconnect(),n.stop()}}}},{"./blocs/bassline.js":1,"./blocs/feedbackdelay.js":2,"./blocs/lumberjack.js":3}],7:[function(t,e){"use strict";e.exports={initialize:function(e,n){var i=t("./blocs/qwerty-hancock.js"),o=i.createProcessor(e),r=(i.createView(o,n),t("./blocs/lumberjack.js")),s=r.createProcessor(e);return o.outputs.midi.connect(s.inputs.midi),s.outputs.audio.node.connect(e.destination),function(){s.outputs.audio.disconnect()}}}},{"./blocs/lumberjack.js":3,"./blocs/qwerty-hancock.js":4}],8:[function(t){"use strict";function e(t){o&&(o.terminator&&o.terminator(),delete o.terminator,c.innerHTML="",o.preElem.style.display="none"),o=r[t],o.terminator=o.module.initialize(i,c),o.preElem.style.display="block"}function n(){i=new(window.AudioContext||window.webkitAudioContext);var t=document.getElementById("demos-list");for(var n in r){var o=document.createElement("LI");o.setAttribute("class","demo-choice"),o.appendChild(document.createTextNode(n)),t.appendChild(o);var c=document.createElement("CODE");c.className="language-javascript";var u=/\/\/SHOWBEGIN([^]*)\/\/SHOWEND/gm.exec(r[n].code)[1].trim();c.appendChild(document.createTextNode(u));var l=document.createElement("PRE");l.className="code-wrapper",l.style.display="none",l.appendChild(c),a.appendChild(l),r[n].preElem=l}document.addEventListener("click",function(t){"demo-choice"===t.target.className&&e(t.target.textContent)}),e(s)}var i,o,r={demo1:{code:"'use strict';\n\nmodule.exports = {\n  initialize: function(audioContext, container) {\n\ncontainer.innerHTML = '<div id=\"clickme\" style=\"padding:20px;border:1px solid black;text-align:center;\">Click Me</div>';\n\n//SHOWBEGIN\n// require blocs\nvar lumb = require('./blocs/lumberjack.js').createProcessor(audioContext);\n\n// connect up blocs\nlumb.outputs.audio.node.connect(audioContext.destination);\n\n// helper function to choose random array elem\nfunction randomElement(arr) {\n  return arr[Math.floor(Math.random()*arr.length)];\n}\n\n// every click on div, play a random note in scale\ndocument.getElementById('clickme').addEventListener('mousedown', function(e) {\n  e.preventDefault();  \n  lumb.inputs.midi.noteOnOff({\n    pitch: 31 + randomElement([0, 3, 5, 7, 10, 12]),\n    duration: 1,\n  });\n});\n//SHOWEND\n\n    return function terminate() {\n      lumb.outputs.audio.disconnect();\n    };\n  },\n}\n",module:t("./demos/demo1.js")},demo2:{code:"'use strict';\n\nmodule.exports = {\n  initialize: function(audioContext) {\n\n//SHOWBEGIN\nvar bl = require('./blocs/bassline.js').createProcessor(audioContext);\nvar lumb = require('./blocs/lumberjack.js').createProcessor(audioContext);\nvar fbd = require('./blocs/feedbackdelay.js').createProcessor(audioContext);\n\nbl.outputs.midi.connect(lumb.inputs.midi);\nlumb.outputs.audio.node.connect(fbd.inputs.audio.node);\nfbd.outputs.audio.node.connect(audioContext.destination);\n\nbl.start(120);\n//SHOWEND\n\n    return function terminate() {\n      fbd.outputs.audio.disconnect();\n      bl.stop();\n    };\n  },\n}\n",module:t("./demos/demo2.js")},demo3:{code:"'use strict';\n\nmodule.exports = {\n  initialize: function(audioContext, container) {\n\n//SHOWBEGIN\n// require and create qwerty hancock bloc (with view)\nvar qwerty = require('./blocs/qwerty-hancock.js');\nvar qwertyProc = qwerty.createProcessor(audioContext);\nvar qwertyView = qwerty.createView(qwertyProc, container);\n\n// require and create lumberjack bloc\nvar lumber = require('./blocs/lumberjack.js');\nvar lumberProc = lumber.createProcessor(audioContext);\n\n// connect up blocs\nqwertyProc.outputs.midi.connect(lumberProc.inputs.midi);\nlumberProc.outputs.audio.node.connect(audioContext.destination);\n//SHOWEND\n\n    return function terminate() {\n      lumberProc.outputs.audio.disconnect();\n    };\n  },\n}\n",module:t("./demos/demo3.js")}},s="demo1",a=document.getElementById("code-column"),c=document.getElementById("ui-column");document.addEventListener("DOMContentLoaded",function(){n()})},{"./demos/demo1.js":5,"./demos/demo2.js":6,"./demos/demo3.js":7}],9:[function(t,e,n){!function(){function t(){this._events={},this._conf&&e.call(this,this._conf)}function e(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,e.call(this,t)}function o(t,e,n,i){if(!n)return[];var r,s,a,c,u,l,d,h=[],f=e.length,p=e[i],m=e[i+1];if(i===f&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(r=0,s=n._listeners.length;s>r;r++)t&&t.push(n._listeners[r]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(h=h.concat(o(t,e,n[a],i+1)));return h}if("**"===p){d=i+1===f||i+2===f&&"*"===m,d&&n._listeners&&(h=h.concat(o(t,e,n,f)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!d&&(h=h.concat(o(t,e,n[a],f))),h=h.concat(o(t,e,n[a],i))):h=h.concat(a===m?o(t,e,n[a],i+2):o(t,e,n[a],i)));return h}h=h.concat(o(t,e,n[p],i+1))}if(c=n["*"],c&&o(t,e,c,i+1),u=n["**"])if(f>i){u._listeners&&o(t,e,u,f);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===m?o(t,e,u[a],i+2):a===p?o(t,e,u[a],i+1):(l={},l[a]=u[a],o(t,e,{"**":l},i+1)))}else u._listeners?o(t,e,u,f):u["*"]&&u["*"]._listeners&&o(t,e,u["*"],f);return h}function r(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,i=t.length;i>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var o=this.listenerTree,r=t.shift();r;){if(o[r]||(o[r]={}),o=o[r],0===t.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,e];else if(s(o._listeners)&&(o._listeners.push(e),!o._listeners.warned)){var c=a;"undefined"!=typeof this._events.maxListeners&&(c=this._events.maxListeners),c>0&&o._listeners.length>c&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}else o._listeners=e;return!0}r=t.shift()}return!0}var s=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(e){this._events||t.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function i(){0===--e&&o.off(t,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this.on(t,i),o},i.prototype.emit=function(){this._events||t.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,i=new Array(n-1),r=1;n>r;r++)i[r-1]=arguments[r];for(r=0,n=this._all.length;n>r;r++)this.event=e,this._all[r].apply(this,i)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var a="string"==typeof e?e.split(this.delimiter):e.slice();o.call(this,s,a,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s){if(this.event=e,1===arguments.length)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,i=new Array(n-1),r=1;n>r;r++)i[r-1]=arguments[r];s.apply(this,i)}return!0}if(s){for(var n=arguments.length,i=new Array(n-1),r=1;n>r;r++)i[r-1]=arguments[r];for(var c=s.slice(),r=0,n=c.length;n>r;r++)this.event=e,c[r].apply(this,i);return c.length>0||!!this._all}return!!this._all},i.prototype.on=function(e,n){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||t.call(this),this.emit("newListener",e,n),this.wildcard)return r.call(this,e,n),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],n];else if(s(this._events[e])&&(this._events[e].push(n),!this._events[e].warned)){var i=a;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=n;return this},i.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var r="string"==typeof t?t.split(this.delimiter):t.slice();i=o.call(this,null,r,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],i.push({_listeners:n})}for(var a=0;a<i.length;a++){var c=i[a];if(n=c._listeners,s(n)){for(var u=-1,l=0,d=n.length;d>l;l++)if(n[l]===e||n[l].listener&&n[l].listener===e||n[l]._origin&&n[l]._origin===e){u=l;break}if(0>u)continue;return this.wildcard?c._listeners.splice(u,1):this._events[t].splice(u,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete c._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,i=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,i=e.length;i>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||t.call(this),this;if(this.wildcard)for(var n="string"==typeof e?e.split(this.delimiter):e.slice(),i=o.call(this,null,n,this.listenerTree,0),r=0;r<i.length;r++){var s=i[r];s._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},i.prototype.listeners=function(e){if(this.wildcard){var n=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return o.call(this,n,i,this.listenerTree,0),n}return this._events||t.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof n?n.EventEmitter2=i:window.EventEmitter2=i}()},{}],10:[function(t,e,n){"use strict";function i(t){this.node=t}function o(t){this.node=t}function r(t){this.parent=t,this.emitter=new u}function s(t){this.parent=t,this.emitter=new u,this.connectedInputs=[];var e=this;this.emitter.onAny(function(t){for(var n=0;n<e.connectedInputs.length;n++)e.connectedInputs[n].emit(this.event,t)})}function a(t){this.audioContext=t,this.inputs={},this.outputs={},this.timeoutID=null,this.beats=new u,this.beat=null,this.messages=new u}function c(t,e){this.processor=t,this.container=e}var u=t("eventemitter2").EventEmitter2;i.prototype.type="audio",o.prototype.type="audio",o.prototype.disconnect=function(){this.node.disconnect()},s.prototype.connect=function(t){this.connectedInputs.indexOf(t)<0&&this.connectedInputs.push(t)},s.prototype.disconnect=function(){this.connectedInputs=[]},r.prototype.type=s.prototype.type="midi",r.prototype.emit=s.prototype.emit=function(t,e){this.emitter.emit(t,e)},r.prototype.on=s.prototype.on=function(t,e){return this.emitter.on(t,e),this},r.prototype.noteOn=s.prototype.noteOn=function(t){this.emitter.emit("noteOn",t)},r.prototype.noteOff=s.prototype.noteOff=function(t){this.emitter.emit("noteOff",t)},r.prototype.noteOnOff=s.prototype.noteOnOff=function(t){this.emitter.emit("noteOn",t);var e={pitch:t.pitch,velocity:0};e.time=t.time?t.time+t.duration:this.parent.audioContext.currentTime+t.duration,this.emitter.emit("noteOff",e)},a.prototype.start=function(t){var e=.05,n=.1,i=4,o=t*i/60,r=60/(t*i),s=this,a=null,c=null,u=0,l=function(){var t=s.audioContext.currentTime;null===a&&(a=t,c=t),t>c&&console.log("FELL BEHIND BY",t-c);var i,d=t+n,h=Math.floor(o*(d-a));for(i=u;h>=i;i++)s.beats.emit("16th",{time:a+i*r,duration:r});u=i,c=d,s.timeoutID=setTimeout(l,1e3*e)};l()},a.prototype.stop=function(){this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},a.prototype.sendMessage=function(t,e){this.messages.emit(t,e)},a.prototype.addAudioInput=function(t,e){if(t=t||"audio",this.inputs.hasOwnProperty(t))throw new Error("Already have input named "+t+", cannot add another");this.inputs[t]=new i(e)},a.prototype.addAudioOutput=function(t,e){if(t=t||"audio",this.outputs.hasOwnProperty(t))throw new Error("Already have output named "+t+", cannot add another");this.outputs[t]=new o(e)},a.prototype.addMidiInput=function(t){if(t=t||"midi",this.inputs.hasOwnProperty(t))throw new Error("Already have input named "+t+", cannot add another");var e=new r(this);return this.inputs[t]=e,e},a.prototype.addMidiOutput=function(t){if(t=t||"midi",this.outputs.hasOwnProperty(t))throw new Error("Already have output named "+t+", cannot add another");var e=new s(this);return this.outputs[t]=e,e},n.createBloc=function(t,e){var n={sonibloc:"0.0"};return n.createProcessor=function(e){var n=new a(e);return t.call(n),n},e&&(n.createView=function(t,n){var i=new c(t,n);return e.call(i),i}),n},n.addPressListener=function(t,e){t.addEventListener("mousedown",e,!1),t.addEventListener("touchstart",e,!1)}},{eventemitter2:9}]},{},[8]);